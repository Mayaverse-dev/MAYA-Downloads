<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Digital Assets - MAYA</title>
    <meta name="description"
        content="Access your exclusive MAYA digital assets. Download wallpapers, literature, and 3D files included with your pledge.">
    <meta name="theme-color" content="#E61E25">
    <meta name="robots" content="noindex, nofollow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://store.entermaya.com/assets">
    <meta property="og:title" content="Digital Assets - MAYA">
    <meta property="og:description"
        content="Access your exclusive MAYA digital assets including wallpapers, literature, and 3D files.">
    <meta property="og:image" content="https://store.entermaya.com/images/hero/divya.png">
    <meta property="og:site_name" content="MAYA Pledge Manager">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Digital Assets - MAYA">
    <meta name="twitter:description" content="Access your exclusive MAYA digital assets.">
    <meta name="twitter:image" content="https://store.entermaya.com/images/hero/divya.png">
    <meta name="twitter:site" content="@maya_lore_">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

    <!-- Fonts - Preconnect for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/style.css">
    <style>
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .assets-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 120px 32px 60px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            flex: 1;
            align-content: center;
        }

        @media (max-width: 1024px) {
            .assets-container {
                max-width: 800px;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
                padding: 100px 24px 40px;
            }
        }

        @media (max-width: 768px) {
            .assets-container {
                grid-template-columns: 1fr;
                max-width: 400px;
                gap: 16px;
                padding: 100px 20px 40px;
            }
        }

        .asset-card {
            background: var(--matter);
            border: 1px solid var(--border);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            aspect-ratio: 3/4;
            min-height: 300px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            text-decoration: none;
            display: flex;
        }

        .asset-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .asset-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: all 0.6s ease;
            filter: grayscale(60%) brightness(0.8);
        }

        .asset-bg.loaded {
            opacity: 0.5;
        }

        .asset-card:hover .asset-bg {
            opacity: 0.7;
            transform: scale(1.03);
            filter: grayscale(0%) brightness(1);
        }

        .asset-content {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 10;
            padding: 24px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: linear-gradient(180deg, 
                rgba(0, 0, 0, 0.3) 0%, 
                rgba(0, 0, 0, 0) 30%,
                rgba(0, 0, 0, 0) 50%,
                rgba(0, 0, 0, 0.8) 100%);
        }

        .asset-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .asset-icon {
            width: 20px;
            height: 20px;
            color: var(--text-dim);
            opacity: 0.7;
        }

        .asset-number {
            font-family: 'IBM Plex Mono', monospace;
            color: var(--text-dim);
            font-size: 11px;
            letter-spacing: 0.15em;
            text-transform: uppercase;
        }

        .asset-footer {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .asset-title {
            font-family: 'Inter', sans-serif;
            font-size: 1.75rem;
            font-weight: 600;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: -0.01em;
            line-height: 1.1;
            margin: 0;
        }

        .asset-desc {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.5;
            letter-spacing: 0.02em;
        }

        .asset-card:hover .asset-desc {
            color: rgba(255, 255, 255, 0.9);
        }

        .hover-arrow {
            position: absolute;
            bottom: 24px;
            right: 24px;
            opacity: 0;
            transform: translateX(-8px);
            transition: all 0.3s ease;
            color: var(--accent);
            font-size: 20px;
            font-weight: 300;
        }

        .asset-card:hover .hover-arrow {
            opacity: 1;
            transform: translateX(0);
        }

        /* Navbar tweaks for this page */
        #navbar {
            position: fixed;
            top: 24px;
            background: rgba(5, 5, 5, 0.9);
            backdrop-filter: blur(16px);
        }

        @media (max-width: 768px) {
            .asset-title {
                font-size: 1.5rem;
            }

            .asset-content {
                padding: 20px;
            }

            .hover-arrow {
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <div id="navbar">
        <a href="/" class="logo-container">
            <img src="/images/maya-logo.png" alt="MAYA">
        </a>
        <div class="flex items-center gap-4">
            <a href="/" class="btn" style="height: 36px; padding: 0 16px; font-size: 11px;">STORE</a>
            <a href="/assets" class="btn" style="height: 36px; padding: 0 16px; font-size: 11px; background: var(--accent); border-color: var(--accent);">ASSETS</a>
            <a href="/login" class="btn" style="height: 36px; padding: 0 16px; font-size: 11px;">PROFILE</a>
        </div>
    </div>

    <!-- Main Container -->
    <div class="assets-container">

        <!-- Wallpaper Card -->
        <a href="/assets/wallpaper" class="asset-card">
            <img class="asset-bg" id="wallpaper-bg" alt="Wallpapers">
            <div class="asset-content">
                <div class="asset-header">
                    <svg class="asset-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                    </svg>
                    <span class="asset-number">01 / Wallpaper</span>
                </div>
                <div class="asset-footer">
                    <h2 class="asset-title">Wallpapers</h2>
                    <p class="asset-desc">High-resolution backgrounds for desktop and mobile.</p>
                </div>
            </div>
            <span class="hover-arrow">→</span>
        </a>

        <!-- Literature Card -->
        <a href="/assets/literature" class="asset-card">
            <img class="asset-bg" id="literature-bg" alt="Literature">
            <div class="asset-content">
                <div class="asset-header">
                    <svg class="asset-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
                    </svg>
                    <span class="asset-number">02 / Literature</span>
                </div>
                <div class="asset-footer">
                    <h2 class="asset-title">Literature</h2>
                    <p class="asset-desc">Lore documents and narrative archives.</p>
                </div>
            </div>
            <span class="hover-arrow">→</span>
        </a>

        <!-- 3D Files Card -->
        <a href="/assets/3d" class="asset-card">
            <img class="asset-bg" id="models-bg" alt="3D Models">
            <div class="asset-content">
                <div class="asset-header">
                    <svg class="asset-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
                    </svg>
                    <span class="asset-number">03 / 3D Models</span>
                </div>
                <div class="asset-footer">
                    <h2 class="asset-title">3D Files</h2>
                    <p class="asset-desc">Printable miniatures and STL files.</p>
                </div>
            </div>
            <span class="hover-arrow">→</span>
        </a>

    </div>

    <script>
        // Load thumbnails dynamically from the API
        async function loadThumbnails() {
            // Wallpaper - fetch from wallpaper API to get a real wallpaper
            try {
                const wpRes = await fetch('/api/assets/wallpaper');
                const wallpapers = await wpRes.json();
                if (wallpapers.length > 0) {
                    const wpImg = document.getElementById('wallpaper-bg');
                    wpImg.src = wallpapers[0].thumbUrl;
                    wpImg.onload = () => wpImg.classList.add('loaded');
                }
            } catch (e) {
                console.log('Failed to load wallpaper thumbnail');
            }

            // Literature - use Vaanar book cover
            const litImg = document.getElementById('literature-bg');
            litImg.src = '/api/assets/thumbnail?key=Products/Pledges/vaanar.png';
            litImg.onload = () => litImg.classList.add('loaded');

            // 3D Models - fetch from 3D API to get a real model render
            try {
                const modRes = await fetch('/api/assets/3d');
                const models = await modRes.json();
                if (models.length > 0) {
                    const modImg = document.getElementById('models-bg');
                    modImg.src = models[0].thumbUrl;
                    modImg.onload = () => modImg.classList.add('loaded');
                }
            } catch (e) {
                console.log('Failed to load 3D thumbnail');
            }
        }

        // Track page visit
        const pageLoadTime = Date.now();
        async function trackPageVisit() {
            try {
                await fetch('/api/user/track-visit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        pagePath: window.location.pathname,
                        pageTitle: document.title,
                        referrer: document.referrer || null
                    })
                });
            } catch (err) {}
        }

        window.addEventListener('beforeunload', () => {
            const duration = Date.now() - pageLoadTime;
            const data = JSON.stringify({
                pagePath: window.location.pathname,
                pageTitle: document.title,
                visitDuration: duration
            });
            navigator.sendBeacon('/api/user/track-visit', new Blob([data], { type: 'application/json' }));
        });

        trackPageVisit();
        loadThumbnails();
    </script>
</body>

</html>
